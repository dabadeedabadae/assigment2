<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>E-commerce CRUD Playground</title>
  <style>
    :root {
      font-family: system-ui, sans-serif;
      color-scheme: light dark;
    }
    body {
      margin: 0;
      padding: 32px;
      display: flex;
      flex-direction: column;
      gap: 32px;
      background: #f5f5f5;
      color: #222;
    }
    header {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    header h1 {
      margin: 0;
    }
    header p {
      margin: 0;
      max-width: 700px;
      line-height: 1.5;
    }
    .sections {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }
    section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    section h2 {
      margin: 0;
    }
    section p {
      margin: 0;
      color: #555;
    }
    form,
    .action {
      display: flex;
      flex-direction: column;
      gap: 6px;
      padding: 12px;
      border: 1px dashed #ddd;
      border-radius: 8px;
      background: #fafafa;
    }
    label {
      display: flex;
      flex-direction: column;
      font-size: 0.9rem;
      color: #111;
      gap: 4px;
    }
    input,
    textarea,
    button {
      font: inherit;
    }
    input,
    textarea {
      padding: 6px 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      border: none;
      background: #222;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: opacity 0.15s;
    }
    button:hover {
      opacity: 0.85;
    }
    pre {
      margin: 0;
      background: #111;
      color: #A689E1;
      padding: 16px;
      border-radius: 12px;
      overflow-x: auto;
      min-height: 160px;
    }
    small code {
      background: #eee;
      padding: 1px 4px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <div class="sections">
    <section id="customers">
      <h2>Customers</h2>
      <form id="createCustomerForm">
        <strong>POST /api/customers</strong>
        <label>Name<input type="text" id="customerCreateName" required /></label>
        <label>Email<input type="email" id="customerCreateEmail" required /></label>
        <button type="submit">Create</button>
      </form>
      <div class="action">
        <strong>GET /api/customers</strong>
        <button id="listCustomersBtn" type="button">Load all</button>
      </div>
      <div class="action">
        <strong>GET /api/customers/:id</strong>
        <label>Customer id<input type="number" id="customerGetId" /></label>
        <button id="getCustomerBtn" type="button">Fetch</button>
      </div>
      <form id="updateCustomerForm">
        <strong>PUT /api/customers/:id</strong>
        <label>Id<input type="number" id="customerUpdateId" required /></label>
        <label>New name<input type="text" id="customerUpdateName" required /></label>
        <label>New email<input type="email" id="customerUpdateEmail" required /></label>
        <button type="submit">Save</button>
      </form>
      <div class="action">
        <strong>DELETE /api/customers/:id</strong>
        <label>Id<input type="number" id="customerDeleteId" /></label>
        <button id="deleteCustomerBtn" type="button">Delete</button>
      </div>
    </section>

    <section id="employees">
      <h2>Employees</h2>
      
      <form id="createEmployeeForm">
        <strong>POST /api/employees</strong>
        <label>Name<input type="text" id="employeeCreateName" required /></label>
        <label>Role<input type="text" id="employeeCreateRole" required /></label>
        <button type="submit">Create</button>
      </form>
      <div class="action">
        <strong>GET /api/employees</strong>
        <button id="listEmployeesBtn" type="button">Load all</button>
      </div>
      <div class="action">
        <strong>GET /api/employees/:id</strong>
        <label>Employee id<input type="number" id="employeeGetId" /></label>
        <button id="getEmployeeBtn" type="button">Fetch</button>
      </div>
      <form id="updateEmployeeForm">
        <strong>PUT /api/employees/:id</strong>
        <label>Id<input type="number" id="employeeUpdateId" required /></label>
        <label>New name<input type="text" id="employeeUpdateName" required /></label>
        <label>New role<input type="text" id="employeeUpdateRole" required /></label>
        <button type="submit">Save</button>
      </form>
      <div class="action">
        <strong>DELETE /api/employees/:id</strong>
        <label>Id<input type="number" id="employeeDeleteId" /></label>
        <button id="deleteEmployeeBtn" type="button">Delete</button>
      </div>
    </section>

    <section id="products">
      <h2>Products</h2>
      
      <form id="createProductForm">
        <strong>POST /api/products</strong>
        <label>Name<input type="text" id="productCreateName" required /></label>
        <label>Price<input type="number" step="0.01" id="productCreatePrice" required /></label>
        <label>Stock<input type="number" id="productCreateStock" required /></label>
        <button type="submit">Create</button>
      </form>
      <div class="action">
        <strong>GET /api/products</strong>
        <button id="listProductsBtn" type="button">Load all</button>
      </div>
      <div class="action">
        <strong>GET /api/products/:id</strong>
        <label>Product id<input type="number" id="productGetId" /></label>
        <button id="getProductBtn" type="button">Fetch</button>
      </div>
      <form id="updateProductForm">
        <strong>PUT /api/products/:id</strong>
        <label>Id<input type="number" id="productUpdateId" required /></label>
        <label>New name<input type="text" id="productUpdateName" required /></label>
        <label>New price<input type="number" step="0.01" id="productUpdatePrice" required /></label>
        <label>New stock<input type="number" id="productUpdateStock" required /></label>
        <button type="submit">Save</button>
      </form>
      <div class="action">
        <strong>DELETE /api/products/:id</strong>
        <label>Id<input type="number" id="productDeleteId" /></label>
        <button id="deleteProductBtn" type="button">Delete</button>
      </div>
    </section>

    <section id="orders">
      <h2>Orders</h2>
      
      <form id="createOrderForm">
        <strong>POST /api/orders</strong>
        <label>Customer id<input type="number" id="orderCustomerId" required /></label>
        <label>
          Items JSON
          <textarea id="orderItemsJson" rows="6" required>[
  { "product_id": 1, "quantity": 2 }
]</textarea>
        </label>
        <button type="submit">Create order</button>
      </form>
      <div class="action">
        <strong>GET /api/orders</strong>
        <button id="listOrdersBtn" type="button">Load all</button>
      </div>
      <div class="action">
        <strong>GET /api/orders/:id</strong>
        <label>Order id<input type="number" id="orderGetId" /></label>
        <button id="getOrderBtn" type="button">Fetch</button>
      </div>
    </section>
  </div>

  <section>
    <h2>Server response</h2>
    <pre id="output">Responses will appear here...</pre>
  </section>

  <script>
    const output = document.getElementById("output");
    function show(data) {
      output.textContent = JSON.stringify(data, null, 2);
    }

    async function safeFetch(url, options) {
      try {
        const res = await fetch(url, options);
        const data = await res.json();
        show(data);
      } catch (err) {
        show({ error: err.message });
      }
    }

   
    document.getElementById("createCustomerForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("customerCreateName").value;
      const email = document.getElementById("customerCreateEmail").value;
      safeFetch("/api/customers", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email }),
      });
    });
    document.getElementById("listCustomersBtn").addEventListener("click", () =>
      safeFetch("/api/customers")
    );
    document.getElementById("getCustomerBtn").addEventListener("click", () => {
      const id = document.getElementById("customerGetId").value;
      if (!id) return show({ error: "customer id is required" });
      safeFetch(`/api/customers/${id}`);
    });
    document.getElementById("updateCustomerForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const id = document.getElementById("customerUpdateId").value;
      const name = document.getElementById("customerUpdateName").value;
      const email = document.getElementById("customerUpdateEmail").value;
      safeFetch(`/api/customers/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email }),
      });
    });
    document.getElementById("deleteCustomerBtn").addEventListener("click", () => {
      const id = document.getElementById("customerDeleteId").value;
      if (!id) return show({ error: "customer id is required" });
      safeFetch(`/api/customers/${id}`, { method: "DELETE" });
    });

   
    document.getElementById("createEmployeeForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("employeeCreateName").value;
      const role = document.getElementById("employeeCreateRole").value;
      safeFetch("/api/employees", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, role }),
      });
    });
    document.getElementById("listEmployeesBtn").addEventListener("click", () =>
      safeFetch("/api/employees")
    );
    document.getElementById("getEmployeeBtn").addEventListener("click", () => {
      const id = document.getElementById("employeeGetId").value;
      if (!id) return show({ error: "employee id is required" });
      safeFetch(`/api/employees/${id}`);
    });
    document.getElementById("updateEmployeeForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const id = document.getElementById("employeeUpdateId").value;
      const name = document.getElementById("employeeUpdateName").value;
      const role = document.getElementById("employeeUpdateRole").value;
      safeFetch(`/api/employees/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, role }),
      });
    });
    document.getElementById("deleteEmployeeBtn").addEventListener("click", () => {
      const id = document.getElementById("employeeDeleteId").value;
      if (!id) return show({ error: "employee id is required" });
      safeFetch(`/api/employees/${id}`, { method: "DELETE" });
    });

    
    document.getElementById("createProductForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("productCreateName").value;
      const price = Number(document.getElementById("productCreatePrice").value);
      const stock = Number(document.getElementById("productCreateStock").value);
      safeFetch("/api/products", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, price, stock }),
      });
    });
    document.getElementById("listProductsBtn").addEventListener("click", () =>
      safeFetch("/api/products")
    );
    document.getElementById("getProductBtn").addEventListener("click", () => {
      const id = document.getElementById("productGetId").value;
      if (!id) return show({ error: "product id is required" });
      safeFetch(`/api/products/${id}`);
    });
    document.getElementById("updateProductForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const id = document.getElementById("productUpdateId").value;
      const name = document.getElementById("productUpdateName").value;
      const price = Number(document.getElementById("productUpdatePrice").value);
      const stock = Number(document.getElementById("productUpdateStock").value);
      safeFetch(`/api/products/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, price, stock }),
      });
    });
    document.getElementById("deleteProductBtn").addEventListener("click", () => {
      const id = document.getElementById("productDeleteId").value;
      if (!id) return show({ error: "product id is required" });
      safeFetch(`/api/products/${id}`, { method: "DELETE" });
    });

    
    document.getElementById("createOrderForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const customer_id = Number(document.getElementById("orderCustomerId").value);
      let items;
      try {
        items = JSON.parse(document.getElementById("orderItemsJson").value);
      } catch {
        return show({ error: "items must be valid JSON" });
      }
      safeFetch("/api/orders", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ customer_id, items }),
      });
    });
    document.getElementById("listOrdersBtn").addEventListener("click", () =>
      safeFetch("/api/orders")
    );
    document.getElementById("getOrderBtn").addEventListener("click", () => {
      const id = document.getElementById("orderGetId").value;
      if (!id) return show({ error: "order id is required" });
      safeFetch(`/api/orders/${id}`);
    });
  </script>
</body>
</html>
